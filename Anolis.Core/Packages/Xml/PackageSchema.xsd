<?xml version="1.0" encoding="utf-8"?>
<xs:schema id="PackageSchema11" targetNamespace="http://anol.is/PackageSchema11.xsd" xmlns="http://anol.is/PackageSchema11.xsd" elementFormDefault="qualified" xmlns:xs="http://www.w3.org/2001/XMLSchema" xml:lang="en">
	
<!-- Path escapes

Whenever a path is specified in a src="", dest="", or path="" attribute there are Anolis-specific environment variables in addition to the Windows ones (like %programfiles%).
Refer to http://en.wikipedia.org/wiki/Environment_variable#Examples_from_Microsoft_Windows for more details

Note that %programfiles% may or may not return the path to the 32-bit or 64-bit program files on x64 depending on how Anolis itself is executed
 -->
	
	<xs:element name="package">
		<xs:complexType>
			<xs:sequence>
				
				<xs:element name="group" type="itemGroup" maxOccurs="unbounded" />
				
			</xs:sequence>
			
			<!-- <package> attributes -->
			<xs:attributeGroup ref="common" />
			<xs:attribute name="version"     type="xs:decimal" use="required" />
			<xs:attribute name="attribution" type="xs:string"  use="required" />
			<xs:attribute name="website"     type="xs:anyURI"  use="optional" />
			<xs:attribute name="updateUrl"   type="xs:anyURI"  use="optional" />
			
		</xs:complexType>
	</xs:element><!-- /package -->
	
	<xs:complexType name="itemGroup">
		<xs:choice>
			
			<xs:element name="patch" minOccurs="0" maxOccurs="unbounded">
				<xs:complexType>
					<xs:sequence>
						
						<xs:element name="res" maxOccurs="unbounded">
							<xs:complexType>
								
								<!-- <res /> attributes -->
								<xs:attribute name="type" type="xs:string"      use="required" />
								<xs:attribute name="name" type="xs:string"      use="required" />
								<xs:attribute name="lang" type="xs:unsignedInt" use="optional" />
								<xs:attribute name="src"  type="xs:anyURI"      use="required" />
								
							</xs:complexType>
						</xs:element>
						
					</xs:sequence>
					
					<!-- <patch /> attributes -->
					<xs:attributeGroup ref="common" />
					<xs:attribute name="path"      type="xs:anyURI" use="required" />
					<xs:attribute name="condition" type="xs:string" use="optional" />
					
				</xs:complexType>
			</xs:element>
			
			<xs:element name="file" minOccurs="0" maxOccurs="unbounded">
				<xs:complexType>
					
					<!-- <file /> attributes -->
					<xs:attributeGroup ref="common" />
					<xs:attribute name="operation" type="fileOperation" use="required" />
					<xs:attribute name="path"      type="xs:anyURI"     use="required" />
					<xs:attribute name="src"       type="xs:anyURI"     use="optional" />
					<xs:attribute name="condition" type="xs:string"     use="optional" />
					
				</xs:complexType>
			</xs:element>
				
			<xs:element name="extra" minOccurs="0" maxOccurs="unbounded">
				<xs:complexType>
					
					<!-- <extra /> attributes -->
					<xs:attributeGroup ref="common" />
					<xs:attribute name="attribution" type="xs:string"  use="required" />
					<xs:attribute name="type"        type="extraType"  use="required" />
					<xs:attribute name="src"         type="xs:anyURI"  use="required" />
					
				</xs:complexType>
			</xs:element>
			
			<xs:element name="custom" minOccurs="0" maxOccurs="unbounded">
				<xs:complexType>
					
					<!-- <custom /> attributes -->
					<xs:attributeGroup ref="common" />
					<xs:attribute name="fqn" type="xs:string" use="required" />
					
				</xs:complexType>
			</xs:element>
			
			<xs:element name="filetype" minOccurs="0" maxOccurs="unbounded">
				<xs:complexType>
					
					<!-- <filetype /> attributes -->
					<xs:attributeGroup ref="common" />
					
					<xs:attribute name="ifNotDefined" type="definedAction"  use="optional" />
					
					<xs:attribute name="type"         type="xs:string"  use="optional" />
					<xs:attribute name="ext"          type="xs:string"  use="optional" />
					
					<xs:attribute name="iconFile"     type="xs:anyURI"  use="optional" />
					<xs:attribute name="iconPath"     type="xs:anyURI"  use="optional" />
					
				</xs:complexType>
			</xs:element>
			
			<xs:element name="group" type="itemGroup" minOccurs="0" maxOccurs="unbounded" />
			
		</xs:choice>
		
		<!-- <set> attributes -->
		<xs:attributeGroup ref="common" />
		<xs:attribute name="mutex" type="xs:IDREFS" use="optional" />
		
	</xs:complexType>
	
	<!-- Common Attributes -->
	<xs:attributeGroup name="common">
		
		<xs:attribute name="id"          type="xs:ID"      use="optional" />
		<xs:attribute name="name"        type="xs:string"  use="optional" />
		
		<xs:attribute name="desc"        type="xs:string"  use="optional" />
		<xs:attribute name="descImg"     type="xs:anyURI"  use="optional" />
		
		<xs:attribute name="enabled"     type="xs:boolean" use="optional" />
	</xs:attributeGroup>
	
	<!-- Additional Types -->
	
	<xs:simpleType name="versionAction">
		<xs:restriction base="xs:string">
			<xs:enumeration value="warn" />
			<xs:enumeration value="deny" />
			<xs:enumeration value="okay" />
		</xs:restriction>
	</xs:simpleType>
	
	<xs:simpleType name="definedAction">
		<xs:restriction base="xs:string">
			<xs:enumeration value="apply" />
			<xs:enumeration value="ignore" />
		</xs:restriction>
	</xs:simpleType>
	
	<xs:simpleType name="extraType">
		<xs:restriction base="xs:string">
			<xs:enumeration value="wallpaper" />
			<xs:enumeration value="cursor" />
			<xs:enumeration value="cursorScheme" />
			<xs:enumeration value="visualStyle" />
			<xs:enumeration value="programRun" />
			<xs:enumeration value="programZip" />
			<xs:enumeration value="screensaver" />
		</xs:restriction>
	</xs:simpleType>
	
	<xs:simpleType name="fileOperation">
		<xs:restriction base="xs:string">
			<xs:enumeration value="copy" />
			<xs:enumeration value="replace" />
			<xs:enumeration value="delete" />
		</xs:restriction>
	</xs:simpleType>
	
</xs:schema>